"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Tests for AggregateLogger.
 */
const Chai = require("chai");
const Sinon = require("sinon");
const aggregateLogger_1 = require("../../../dist/aggregateLogger");
describe("AggregateLogger", () => {
    let sandbox;
    let loggerStub;
    let spiedBannerMethod;
    let spiedInfoMethod;
    let spiedWarningMethod;
    let spiedErrorMethod;
    beforeEach(() => {
        sandbox = Sinon.createSandbox();
        loggerStub = {};
        loggerStub.banner = () => { };
        loggerStub.info = () => { };
        loggerStub.warning = () => { };
        loggerStub.error = () => { };
        spiedBannerMethod = sandbox.spy(loggerStub, "banner");
        spiedInfoMethod = sandbox.spy(loggerStub, "info");
        spiedWarningMethod = sandbox.spy(loggerStub, "warning");
        spiedErrorMethod = sandbox.spy(loggerStub, "error");
    });
    afterEach(() => {
        sandbox.restore();
    });
    it("can be created", () => {
        const obj = new aggregateLogger_1.AggregateLogger(undefined);
        Chai.should().exist(obj);
    });
    describe("banner", () => {
        it("can be called with no loggers", () => {
            const obj = new aggregateLogger_1.AggregateLogger(undefined);
            Chai.expect(obj.banner("")).to.be.equal(undefined);
        });
        it("can be called with logger", () => {
            const obj = new aggregateLogger_1.AggregateLogger([loggerStub]);
            obj.banner("message");
            Chai.expect(spiedBannerMethod.calledWith("message"));
        });
    });
    describe("info", () => {
        it("can be called with no loggers", () => {
            const obj = new aggregateLogger_1.AggregateLogger(undefined);
            Chai.expect(obj.info("")).to.be.equal(undefined);
        });
        it("can be called with message only", () => {
            const obj = new aggregateLogger_1.AggregateLogger([loggerStub]);
            obj.info("message");
            Chai.expect(spiedInfoMethod.calledWith("message", undefined));
        });
        it("can be called with message and args", () => {
            const obj = new aggregateLogger_1.AggregateLogger([loggerStub]);
            obj.info("message", ["arg"]);
            Chai.expect(spiedInfoMethod.calledWith("message", ["arg"]));
        });
    });
    describe("warning", () => {
        it("can be called with no loggers", () => {
            const obj = new aggregateLogger_1.AggregateLogger(undefined);
            Chai.expect(obj.warning("")).to.be.equal(undefined);
        });
        it("can be called with message only", () => {
            const obj = new aggregateLogger_1.AggregateLogger([loggerStub]);
            obj.warning("message");
            Chai.expect(spiedWarningMethod.calledWith("message", undefined));
        });
        it("can be called with message and args", () => {
            const obj = new aggregateLogger_1.AggregateLogger([loggerStub]);
            obj.warning("message", ["arg"]);
            Chai.expect(spiedWarningMethod.calledWith("message", ["arg"]));
        });
    });
    describe("error", () => {
        it("can be called with no loggers", () => {
            const obj = new aggregateLogger_1.AggregateLogger(undefined);
            Chai.expect(obj.error("")).to.be.equal(undefined);
        });
        it("can be called with message only", () => {
            const obj = new aggregateLogger_1.AggregateLogger([loggerStub]);
            obj.error("message");
            Chai.expect(spiedErrorMethod.calledWith("message", undefined));
        });
        it("can be called with message and args", () => {
            const obj = new aggregateLogger_1.AggregateLogger([loggerStub]);
            obj.error("message", ["arg"]);
            Chai.expect(spiedErrorMethod.calledWith("message", ["arg"]));
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3QvdW5pdC9zcmMvYWdncmVnYXRlTG9nZ2VyLnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7R0FFRztBQUNILDZCQUE2QjtBQUM3QiwrQkFBK0I7QUFFL0Isa0VBQStEO0FBRS9ELFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7SUFDN0IsSUFBSSxPQUEyQixDQUFDO0lBQ2hDLElBQUksVUFBbUIsQ0FBQztJQUN4QixJQUFJLGlCQUFpQyxDQUFDO0lBQ3RDLElBQUksZUFBK0IsQ0FBQztJQUNwQyxJQUFJLGtCQUFrQyxDQUFDO0lBQ3ZDLElBQUksZ0JBQWdDLENBQUM7SUFFckMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNaLE9BQU8sR0FBRyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDaEMsVUFBVSxHQUFZLEVBQUUsQ0FBQztRQUN6QixVQUFVLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM5QixVQUFVLENBQUMsSUFBSSxHQUFHLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM1QixVQUFVLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMvQixVQUFVLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM3QixpQkFBaUIsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUN0RCxlQUFlLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDbEQsa0JBQWtCLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDeEQsZ0JBQWdCLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEQsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFT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QztZQUNyQixJQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUNuRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDM0MsTUFBTSxHQUFHLEdBQUcsSUFBSSxpQ0FBZSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUM5QyxHQUFHLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJhZ2dyZWdhdGVMb2dnZXIuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdHMgZm9yIEFnZ3JlZ2F0ZUxvZ2dlci5cbiAqL1xuaW1wb3J0ICogYXMgQ2hhaSBmcm9tIFwiY2hhaVwiO1xuaW1wb3J0ICogYXMgU2lub24gZnJvbSBcInNpbm9uXCI7XG5pbXBvcnQgeyBJTG9nZ2VyIH0gZnJvbSBcInVuaXRlanMtZnJhbWV3b3JrL2Rpc3QvaW50ZXJmYWNlcy9JTG9nZ2VyXCI7XG5pbXBvcnQgeyBBZ2dyZWdhdGVMb2dnZXIgfSBmcm9tIFwiLi4vLi4vLi4vc3JjL2FnZ3JlZ2F0ZUxvZ2dlclwiO1xuXG5kZXNjcmliZShcIkFnZ3JlZ2F0ZUxvZ2dlclwiLCAoKSA9PiB7XG4gICAgbGV0IHNhbmRib3g6IFNpbm9uLlNpbm9uU2FuZGJveDtcbiAgICBsZXQgbG9nZ2VyU3R1YjogSUxvZ2dlcjtcbiAgICBsZXQgc3BpZWRCYW5uZXJNZXRob2Q6IFNpbm9uLlNpbm9uU3B5O1xuICAgIGxldCBzcGllZEluZm9NZXRob2Q6IFNpbm9uLlNpbm9uU3B5O1xuICAgIGxldCBzcGllZFdhcm5pbmdNZXRob2Q6IFNpbm9uLlNpbm9uU3B5O1xuICAgIGxldCBzcGllZEVycm9yTWV0aG9kOiBTaW5vbi5TaW5vblNweTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBzYW5kYm94ID0gU2lub24uY3JlYXRlU2FuZGJveCgpO1xuICAgICAgICBsb2dnZXJTdHViID0gPElMb2dnZXI+e307XG4gICAgICAgIGxvZ2dlclN0dWIuYmFubmVyID0gKCkgPT4geyB9O1xuICAgICAgICBsb2dnZXJTdHViLmluZm8gPSAoKSA9PiB7IH07XG4gICAgICAgIGxvZ2dlclN0dWIud2FybmluZyA9ICgpID0+IHsgfTtcbiAgICAgICAgbG9nZ2VyU3R1Yi5lcnJvciA9ICgpID0+IHsgfTtcbiAgICAgICAgc3BpZWRCYW5uZXJNZXRob2QgPSBzYW5kYm94LnNweShsb2dnZXJTdHViLCBcImJhbm5lclwiKTtcbiAgICAgICAgc3BpZWRJbmZvTWV0aG9kID0gc2FuZGJveC5zcHkobG9nZ2VyU3R1YiwgXCJpbmZvXCIpO1xuICAgICAgICBzcGllZFdhcm5pbmdNZXRob2QgPSBzYW5kYm94LnNweShsb2dnZXJTdHViLCBcIndhcm5pbmdcIik7XG4gICAgICAgIHNwaWVkRXJyb3JNZXRob2QgPSBzYW5kYm94LnNweShsb2dnZXJTdHViLCBcImVycm9yXCIpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgICAgc2FuZGJveC5yZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdChcImNhbiBiZSBjcmVhdGVkXCIsICgpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqID0gbmV3IEFnZ3JlZ2F0ZUxvZ2dlcih1bmRlZmluZWQpO1xuICAgICAgICBDaGFpLnNob3VsZCgpLmV4aXN0KG9iaik7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImJhbm5lclwiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwiY2FuIGJlIGNhbGxlZCB3aXRoIG5vIGxvZ2dlcnNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEFnZ3JlZ2F0ZUxvZ2dlcih1bmRlZmluZWQpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3Qob2JqLmJhbm5lcihcIlwiKSkudG8uYmUuZXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gYmUgY2FsbGVkIHdpdGggbG9nZ2VyXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IG5ldyBBZ2dyZWdhdGVMb2dnZXIoW2xvZ2dlclN0dWJdKTtcbiAgICAgICAgICAgIG9iai5iYW5uZXIoXCJtZXNzYWdlXCIpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3Qoc3BpZWRCYW5uZXJNZXRob2QuY2FsbGVkV2l0aChcIm1lc3NhZ2VcIikpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKFwiaW5mb1wiLCAoKSA9PiB7XG4gICAgICAgIGl0KFwiY2FuIGJlIGNhbGxlZCB3aXRoIG5vIGxvZ2dlcnNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEFnZ3JlZ2F0ZUxvZ2dlcih1bmRlZmluZWQpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3Qob2JqLmluZm8oXCJcIikpLnRvLmJlLmVxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGJlIGNhbGxlZCB3aXRoIG1lc3NhZ2Ugb25seVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgQWdncmVnYXRlTG9nZ2VyKFtsb2dnZXJTdHViXSk7XG4gICAgICAgICAgICBvYmouaW5mbyhcIm1lc3NhZ2VcIik7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChzcGllZEluZm9NZXRob2QuY2FsbGVkV2l0aChcIm1lc3NhZ2VcIiwgdW5kZWZpbmVkKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGJlIGNhbGxlZCB3aXRoIG1lc3NhZ2UgYW5kIGFyZ3NcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gbmV3IEFnZ3JlZ2F0ZUxvZ2dlcihbbG9nZ2VyU3R1Yl0pO1xuICAgICAgICAgICAgb2JqLmluZm8oXCJtZXNzYWdlXCIsIFtcImFyZ1wiXSk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChzcGllZEluZm9NZXRob2QuY2FsbGVkV2l0aChcIm1lc3NhZ2VcIiwgW1wiYXJnXCJdKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoXCJ3YXJuaW5nXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJjYW4gYmUgY2FsbGVkIHdpdGggbm8gbG9nZ2Vyc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgQWdncmVnYXRlTG9nZ2VyKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChvYmoud2FybmluZyhcIlwiKSkudG8uYmUuZXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gYmUgY2FsbGVkIHdpdGggbWVzc2FnZSBvbmx5XCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IG5ldyBBZ2dyZWdhdGVMb2dnZXIoW2xvZ2dlclN0dWJdKTtcbiAgICAgICAgICAgIG9iai53YXJuaW5nKFwibWVzc2FnZVwiKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KHNwaWVkV2FybmluZ01ldGhvZC5jYWxsZWRXaXRoKFwibWVzc2FnZVwiLCB1bmRlZmluZWQpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gYmUgY2FsbGVkIHdpdGggbWVzc2FnZSBhbmQgYXJnc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgQWdncmVnYXRlTG9nZ2VyKFtsb2dnZXJTdHViXSk7XG4gICAgICAgICAgICBvYmoud2FybmluZyhcIm1lc3NhZ2VcIiwgW1wiYXJnXCJdKTtcbiAgICAgICAgICAgIENoYWkuZXhwZWN0KHNwaWVkV2FybmluZ01ldGhvZC5jYWxsZWRXaXRoKFwibWVzc2FnZVwiLCBbXCJhcmdcIl0pKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZShcImVycm9yXCIsICgpID0+IHtcbiAgICAgICAgaXQoXCJjYW4gYmUgY2FsbGVkIHdpdGggbm8gbG9nZ2Vyc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgQWdncmVnYXRlTG9nZ2VyKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChvYmouZXJyb3IoXCJcIikpLnRvLmJlLmVxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KFwiY2FuIGJlIGNhbGxlZCB3aXRoIG1lc3NhZ2Ugb25seVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgQWdncmVnYXRlTG9nZ2VyKFtsb2dnZXJTdHViXSk7XG4gICAgICAgICAgICBvYmouZXJyb3IoXCJtZXNzYWdlXCIpO1xuICAgICAgICAgICAgQ2hhaS5leHBlY3Qoc3BpZWRFcnJvck1ldGhvZC5jYWxsZWRXaXRoKFwibWVzc2FnZVwiLCB1bmRlZmluZWQpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJjYW4gYmUgY2FsbGVkIHdpdGggbWVzc2FnZSBhbmQgYXJnc1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBuZXcgQWdncmVnYXRlTG9nZ2VyKFtsb2dnZXJTdHViXSk7XG4gICAgICAgICAgICBvYmouZXJyb3IoXCJtZXNzYWdlXCIsIFtcImFyZ1wiXSk7XG4gICAgICAgICAgICBDaGFpLmV4cGVjdChzcGllZEVycm9yTWV0aG9kLmNhbGxlZFdpdGgoXCJtZXNzYWdlXCIsIFtcImFyZ1wiXSkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19
